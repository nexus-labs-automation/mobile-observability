schema: phase-state/v1.1
phase_id: "01-metrics-kit"
phase_name: "MetricKit Integration"
last_updated: "2025-12-22T20:05:00Z"

status: "scout"
workflow_stage: "scout_completed"

# Complexity Assessment
complexity_assessment:
  factors:
    step_count_estimate: 4
    file_scope: 6
    risk_level: "low"
    integration_boundaries: 1
  scores:
    step_count: 2
    file_scope: 2
    risk: 1
    integration: 1
    total: 6
  tier: "medium"
  override:
    applied: false
    reason: null
    original_tier: null

# Agent Selection (medium tier)
agent_selection:
  planners:
    - "technical-planner"
    - "test-planner"
  reviewers:
    - "code-reviewer"
    - "security-reviewer"

# Steps (to be populated during plan phase)
current_step: 0
total_steps: 0
steps: []

# Context for resuming work
resume_context:
  files_modified:
    - "docs/phases/01-metrics-kit/SCOUT_REPORT_METRICKIT.md"
  files_pending:
    - "references/metrickit.md"
    - "skills/metrickit-integration/SKILL.md"
    - "references/templates/metrickit-subscriber.template.md"
    - "references/ios-native.md"
    - "references/crash-reporting.md"
    - "agents/codebase-analyzer.md"
  dependencies_added: []
  tests_passing: true
  build_passing: true
  coverage: null

# Shortcuts (none yet)
shortcuts: []

# Blockers (none)
blockers: []

# Verification
verification:
  last_verified: "2025-12-22T20:05:00Z"
  tests_run: false
  build_run: false
  manual_checks:
    - "Scout report reviewed by domain expert"
    - "Key corrections applied: OOMs = counts only, not stack traces"
    - "Framing corrected: supplementary diagnostics, not crash reporter"

# Scout Phase Artifacts
scout_artifacts:
  report: "SCOUT_REPORT_METRICKIT.md"
  confidence: 85
  key_findings:
    - "MetricKit has two parts: metrics (counts) and diagnostics (stack traces)"
    - "Does NOT provide OOM stack traces - only exit counts"
    - "Best used as supplementary diagnostic data, not primary crash reporter"
    - "Sentry skips MXCrashDiagnostic - may be discarding useful data"
    - "JSON locale issues possible (Swift SR-6631)"
    - "Integration should be optional, not forced"
  risks:
    - severity: "medium"
      description: "Confusion about OOMs vs crash diagnostics"
      mitigation: "Clear documentation distinguishing metrics from diagnostics"
    - severity: "low"
      description: "JSON locale issues in French/other locales"
      mitigation: "Use typed API, recommend ChimeHQ/Meter library"
  recommendations:
    - "Create references/metrickit.md with two-part architecture explanation"
    - "Create optional skills/metrickit-integration/SKILL.md"
    - "Update existing iOS and crash-reporting references"
    - "Add MXMetricManager detection to codebase-analyzer agent"
